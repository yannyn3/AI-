<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI文章创作室</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        apple: {
                            blue: '#0071e3',
                            darkblue: '#0077ED',
                            gray: '#f5f5f7',
                            darkgray: '#1d1d1f',
                            midgray: '#86868b',
                            lightgray: '#f2f2f2'
                        }
                    },
                    fontFamily: {
                        apple: ['-apple-system', 'BlinkMacSystemFont', 'San Francisco', 'Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif']
                    },
                    borderRadius: {
                        'xl': '1rem',
                        '2xl': '1.5rem',
                    },
                    boxShadow: {
                        'apple': '0 4px 16px rgba(0, 0, 0, 0.12)',
                        'apple-dark': '0 4px 16px rgba(255, 255, 255, 0.08)'
                    },
                    backdropBlur: {
                        'apple': '20px'
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/themes.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://unpkg.com/dompurify@3.0.5/dist/purify.min.js"></script>
    <script src="https://unpkg.com/turndown@7.1.2/dist/turndown.js"></script>
</head>
<body class="min-h-screen bg-apple-gray dark:bg-apple-darkgray text-black dark:text-white font-apple transition-colors duration-300">
    <div class="container mx-auto p-4 max-w-6xl">
        <!-- 标题区 -->
        <header class="text-center py-8 mb-8">
            <h1 class="text-4xl font-bold mb-2 bg-gradient-to-r from-apple-blue to-purple-500 inline-block text-transparent bg-clip-text">
                AI 文章创作室
            </h1>
            <p class="text-apple-midgray dark:text-gray-400 text-lg">使用先进AI技术，创造专业精美的内容</p>
        </header>

        <!-- 主内容区 -->
        <main class="space-y-8">
            <!-- 标签式导航 -->
            <div id="app-tabs" class="flex justify-center mb-6">
                <nav class="flex space-x-2 bg-white dark:bg-apple-darkgray rounded-xl p-1 shadow-sm">
                    <button class="tab-button active px-4 py-2 rounded-lg text-sm font-medium" data-tab="content">
                        <i class="fas fa-pen-fancy mr-2"></i>内容创作
                    </button>
                    <button class="tab-button px-4 py-2 rounded-lg text-sm font-medium" data-tab="api">
                        <i class="fas fa-cog mr-2"></i>API配置
                    </button>
                    <button class="tab-button px-4 py-2 rounded-lg text-sm font-medium" data-tab="preview">
                        <i class="fas fa-eye mr-2"></i>预览排版
                    </button>
                </nav>
            </div>

            <!-- 内容创作面板 -->
            <div id="content-tab" class="tab-content">
                <section class="bg-white dark:bg-gray-900 rounded-2xl shadow-apple dark:shadow-apple-dark p-6 mb-6">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-file-alt mr-2 text-apple-blue dark:text-apple-darkblue"></i>
                        文章信息
                    </h2>
                    
                    <div class="mb-4">
                        <label for="articleTitle" class="block mb-2 font-medium text-gray-700 dark:text-gray-300">文章标题</label>
                        <input type="text" id="articleTitle" placeholder="输入引人注目的标题..." 
                            class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition">
                    </div>
                    
                    <div class="mb-4">
                        <label for="articlePrompt" class="block mb-2 font-medium text-gray-700 dark:text-gray-300">文章提示词</label>
                        <textarea id="articlePrompt" rows="3" placeholder="描述您希望生成的文章风格、内容、结构等..." 
                            class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition"></textarea>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block mb-2 font-medium text-gray-700 dark:text-gray-300">文章长度</label>
                            <div class="flex flex-wrap gap-2">
                                <label class="inline-flex items-center px-3 py-2 bg-apple-lightgray dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition">
                                    <input type="radio" name="articleLength" value="short" class="hidden peer" checked>
                                    <div class="w-4 h-4 mr-2 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center peer-checked:border-apple-blue dark:peer-checked:border-apple-darkblue">
                                        <div class="w-2 h-2 rounded-full bg-apple-blue dark:bg-apple-darkblue hidden peer-checked:block"></div>
                                    </div>
                                    <span>短文 (800-1200字)</span>
                                </label>
                                <label class="inline-flex items-center px-3 py-2 bg-apple-lightgray dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition">
                                    <input type="radio" name="articleLength" value="medium" class="hidden peer">
                                    <div class="w-4 h-4 mr-2 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center peer-checked:border-apple-blue dark:peer-checked:border-apple-darkblue">
                                        <div class="w-2 h-2 rounded-full bg-apple-blue dark:bg-apple-darkblue hidden peer-checked:block"></div>
                                    </div>
                                    <span>中等 (1500-2500字)</span>
                                </label>
                                <label class="inline-flex items-center px-3 py-2 bg-apple-lightgray dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition">
                                    <input type="radio" name="articleLength" value="long" class="hidden peer">
                                    <div class="w-4 h-4 mr-2 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center peer-checked:border-apple-blue dark:peer-checked:border-apple-darkblue">
                                        <div class="w-2 h-2 rounded-full bg-apple-blue dark:bg-apple-darkblue hidden peer-checked:block"></div>
                                    </div>
                                    <span>长文 (3000字以上)</span>
                                </label>
                            </div>
                        </div>
                        <div>
                            <label class="block mb-2 font-medium text-gray-700 dark:text-gray-300">排版主题</label>
                            <select id="articleTheme" class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition">
                             <option value="modern">现代简约风</option>
                                <option value="magazine">杂志排版风</option>
                                <option value="tech">科技风格</option>
                                <option value="business">优雅商务风</option>
                                <option value="creative">创意设计风</option>
                                <option value="tutorial">教程指南风</option>
                                <option value="entertainment">娱乐风格</option>
                                <option value="academic">学术论文风</option>
                                <option value="media">自媒体风格</option>
                            </select>
                        </div>
                    </div>
                </section>

                <section class="bg-white dark:bg-gray-900 rounded-2xl shadow-apple dark:shadow-apple-dark p-6 mb-6">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-book mr-2 text-apple-blue dark:text-apple-darkblue"></i>
                        参考资料
                    </h2>
                    
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-2">
                            <label for="referenceLinks" class="font-medium text-gray-700 dark:text-gray-300">参考链接 (每行一个)</label>
                            <button id="validateLinksBtn" class="text-xs text-apple-blue dark:text-apple-darkblue hover:underline flex items-center">
                                <i class="fas fa-check-circle mr-1"></i>验证链接
                            </button>
                        </div>
                        <textarea id="referenceLinks" rows="2" placeholder="https://example.com/article1&#10;https://example.com/article2" 
                            class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition"></textarea>
                        <div id="linkValidationResult" class="mt-1 hidden"></div>
                    </div>
                    
                    <div class="mb-4">
                        <label for="referenceText" class="block mb-2 font-medium text-gray-700 dark:text-gray-300">参考文本</label>
                        <textarea id="referenceText" rows="4" placeholder="粘贴参考文章文本..." 
                            class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition"></textarea>
                    </div>

                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-2">
                            <label class="font-medium text-gray-700 dark:text-gray-300">网页导入工具</label>
                            <div class="flex gap-2">
                                <button id="fetchContentBtn" class="text-xs text-apple-blue dark:text-apple-darkblue hover:underline flex items-center">
                                    <i class="fas fa-download mr-1"></i>抓取内容
                                </button>
                                <span class="text-gray-400">|</span>
                                <button id="clearResultsBtn" class="text-xs text-red-500 hover:underline flex items-center">
                                    <i class="fas fa-trash mr-1"></i>清空结果
                                </button>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <input type="text" id="scrapeUrl" placeholder="输入要抓取的网页URL" 
                                class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition">
                        </div>
                        <div id="scrapeResult" class="mt-2 hidden p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 max-h-40 overflow-auto"></div>
                    </div>
                    
                    <div class="mb-2">
                        <label class="block mb-2 font-medium text-gray-700 dark:text-gray-300">参考文件</label>
                        <label for="referenceFiles" class="w-full flex items-center justify-center p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer hover:bg-apple-lightgray dark:hover:bg-gray-800 transition">
                            <div class="text-center">
                                <i class="fas fa-cloud-upload-alt text-xl text-apple-blue dark:text-apple-darkblue mb-2"></i>
                                <p class="text-sm text-gray-600 dark:text-gray-400">点击上传文件或拖拽文件到此处</p>
                                <p class="text-xs text-gray-500 dark:text-gray-500 mt-1">支持 .txt, .docx, .pdf 等文本文件</p>
                            </div>
                            <input id="referenceFiles" type="file" multiple class="hidden">
                        </label>
                        <div id="uploadedFiles" class="mt-2 space-y-1 text-sm"></div>
                    </div>
                </section>

                <section class="bg-white dark:bg-gray-900 rounded-2xl shadow-apple dark:shadow-apple-dark p-6 mb-6">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-image mr-2 text-apple-blue dark:text-apple-darkblue"></i>
                        图片设置
                    </h2>
                    
                    <div class="mb-4">
                        <label class="block mb-2 font-medium text-gray-700 dark:text-gray-300">图片来源</label>
                        <div class="flex flex-wrap gap-2">
                            <label class="inline-flex items-center px-3 py-2 bg-apple-lightgray dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition">
                                <input type="radio" name="imageSource" value="extract" class="hidden peer" checked>
                                <div class="w-4 h-4 mr-2 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center peer-checked:border-apple-blue dark:peer-checked:border-apple-darkblue">
                                    <div class="w-2 h-2 rounded-full bg-apple-blue dark:bg-apple-darkblue hidden peer-checked:block"></div>
                                </div>
                                <span>从参考链接提取</span>
                            </label>
                            <label class="inline-flex items-center px-3 py-2 bg-apple-lightgray dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition">
                                <input type="radio" name="imageSource" value="generate" class="hidden peer">
                                <div class="w-4 h-4 mr-2 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center peer-checked:border-apple-blue dark:peer-checked:border-apple-darkblue">
                                    <div class="w-2 h-2 rounded-full bg-apple-blue dark:bg-apple-darkblue hidden peer-checked:block"></div>
                                </div>
                                <span>AI生成图片</span>
                            </label>
                        </div>
                    </div>
                    
                    <div id="imageExtractSettings" class="mb-4">
                        <label class="block mb-2 font-medium text-gray-700 dark:text-gray-300">图片插入方式</label>
                        <div class="flex flex-wrap gap-2">
                            <label class="inline-flex items-center px-3 py-2 bg-apple-lightgray dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition">
                                <input type="radio" name="imageInsertMode" value="even" class="hidden peer" checked>
                                <div class="w-4 h-4 mr-2 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center peer-checked:border-apple-blue dark:peer-checked:border-apple-darkblue">
                                    <div class="w-2 h-2 rounded-full bg-apple-blue dark:bg-apple-darkblue hidden peer-checked:block"></div>
                                </div>
                                <span>均匀分布</span>
                            </label>
                            <label class="inline-flex items-center px-3 py-2 bg-apple-lightgray dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition">
                                <input type="radio" name="imageInsertMode" value="random" class="hidden peer">
                                <div class="w-4 h-4 mr-2 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center peer-checked:border-apple-blue dark:peer-checked:border-apple-darkblue">
                                    <div class="w-2 h-2 rounded-full bg-apple-blue dark:bg-apple-darkblue hidden peer-checked:block"></div>
                                </div>
                                <span>随机分布</span>
                            </label>
                        </div>
                    </div>
                    
                    <div id="imageGenerateSettings" class="hidden">
                        <div class="mb-4">
                            <label for="imagePrompt" class="block mb-2 font-medium text-gray-700 dark:text-gray-300">图片提示词</label>
                            <textarea id="imagePrompt" rows="2" placeholder="描述您希望生成的图片内容、风格等..." 
                                class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition"></textarea>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block mb-2 font-medium text-gray-700 dark:text-gray-300">图片比例</label>
                                <select id="imageAspectRatio" class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition">
                                    <option value="4:3">4:3 (标准)</option>
                                    <option value="1:1">1:1 (正方形)</option>
                                    <option value="16:9">16:9 (宽屏)</option>
                                    <option value="3:4">3:4 (竖屏)</option>
                                    <option value="9:16">9:16 (手机屏)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div>
                            <label class="block mb-2 font-medium text-gray-700 dark:text-gray-300">图片数量</label>
                            <select id="imageCount" class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition">
                                <option value="1">1张</option>
                                <option value="2">2张</option>
                                <option value="3" selected>3张</option>
                                <option value="4">4张</option>
                                <option value="5">5张</option>
                                <option value="0">不使用图片</option>
                            </select>
                        </div>
                    </div>
                </section>

                <!-- 行动按钮 -->
                <div class="flex justify-center">
                    <button id="generateBtn" class="py-3 px-8 bg-apple-blue hover:bg-blue-600 dark:bg-apple-darkblue dark:hover:bg-blue-700 text-white rounded-full font-medium text-lg transition-colors shadow-md hover:shadow-lg flex items-center">
                        <i class="fas fa-magic mr-2"></i>
                        创作精彩文章
                    </button>
                </div>
            </div>

            <!-- API配置面板 -->
            <div id="api-tab" class="tab-content hidden">
                <section class="bg-white dark:bg-gray-900 rounded-2xl shadow-apple dark:shadow-apple-dark p-6 mb-6">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-plug mr-2 text-apple-blue dark:text-apple-darkblue"></i>
                        API配置
                    </h2>
                    
                    <!-- 说明信息 -->
                    <div class="bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 rounded-xl p-4 mb-6">
                        <div class="flex items-start">
                            <i class="fas fa-info-circle mt-1 mr-3 text-lg"></i>
                            <div>
                                <p class="mb-2">配置API密钥后，本应用可以在您的网站上独立工作，无需依赖第三方服务。</p>
                                <p>所有API密钥仅存储在您的浏览器中，不会传输到任何服务器。</p>
                            </div>
                        </div>
                    </div>

                    <!-- API 服务商选择 -->
                    <div class="mb-6">
                        <h3 class="font-medium text-gray-700 dark:text-gray-300 mb-3">选择API服务商</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div class="api-provider-card">
                                <label class="relative p-4 border border-gray-200 dark:border-gray-700 rounded-xl cursor-pointer hover:border-apple-blue dark:hover:border-apple-darkblue transition-all hover:shadow-md flex flex-col h-full">
                                    <input type="radio" name="apiProvider" value="openai" class="hidden" checked>
                                    <div class="absolute top-3 right-3 w-4 h-4 rounded-full border-2 border-apple-blue dark:border-apple-darkblue flex items-center justify-center provider-radio">
                                        <div class="w-2 h-2 rounded-full bg-apple-blue dark:bg-apple-darkblue provider-radio-dot"></div>
                                    </div>
                                    <h4 class="font-medium mb-1">OpenAI</h4>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">GPT-4/3.5等模型</p>
                                    <div class="mt-auto pt-2 border-t border-gray-100 dark:border-gray-800">
                                        <a href="https://platform.openai.com/api-keys" target="_blank" class="text-xs text-apple-blue dark:text-apple-darkblue hover:underline">
                                            获取API密钥 <i class="fas fa-external-link-alt ml-1"></i>
                                        </a>
                                    </div>
                                </label>
                            </div>
                            
                            <div class="api-provider-card">
                                <label class="relative p-4 border border-gray-200 dark:border-gray-700 rounded-xl cursor-pointer hover:border-apple-blue dark:hover:border-apple-darkblue transition-all hover:shadow-md flex flex-col h-full">
                                    <input type="radio" name="apiProvider" value="anthropic" class="hidden">
                                    <div class="absolute top-3 right-3 w-4 h-4 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center provider-radio">
                                        <div class="w-2 h-2 rounded-full bg-apple-blue dark:bg-apple-darkblue hidden provider-radio-dot"></div>
                                    </div>
                                    <h4 class="font-medium mb-1">Anthropic</h4>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">Claude系列模型</p>
                                    <div class="mt-auto pt-2 border-t border-gray-100 dark:border-gray-800">
                                        <a href="https://console.anthropic.com/account/keys" target="_blank" class="text-xs text-apple-blue dark:text-apple-darkblue hover:underline">
                                            获取API密钥 <i class="fas fa-external-link-alt ml-1"></i>
                                        </a>
                                    </div>
                                </label>
                            </div>
                            
                            <div class="api-provider-card">
                                <label class="relative p-4 border border-gray-200 dark:border-gray-700 rounded-xl cursor-pointer hover:border-apple-blue dark:hover:border-apple-darkblue transition-all hover:shadow-md flex flex-col h-full">
                                    <input type="radio" name="apiProvider" value="poe" class="hidden">
                                    <div class="absolute top-3 right-3 w-4 h-4 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center provider-radio">
                                        <div class="w-2 h-2 rounded-full bg-apple-blue dark:bg-apple-darkblue hidden provider-radio-dot"></div>
                                    </div>
                                    <h4 class="font-medium mb-1">Poe API</h4>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">Poe平台多种模型</p>
                                    <div class="mt-auto pt-2 border-t border-gray-100 dark:border-gray-800">
                                        <a href="https://poe.com/api_key" target="_blank" class="text-xs text-apple-blue dark:text-apple-darkblue hover:underline">
                                            获取API密钥 <i class="fas fa-external-link-alt ml-1"></i>
                                        </a>
                                    </div>
                                </label>
                            </div>

                            <div class="api-provider-card">
                                <label class="relative p-4 border border-gray-200 dark:border-gray-700 rounded-xl cursor-pointer hover:border-apple-blue dark:hover:border-apple-darkblue transition-all hover:shadow-md flex flex-col h-full">
                                    <input type="radio" name="apiProvider" value="deepseek" class="hidden">
                                    <div class="absolute top-3 right-3 w-4 h-4 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center provider-radio">
                                        <div class="w-2 h-2 rounded-full bg-apple-blue dark:bg-apple-darkblue hidden provider-radio-dot"></div>
                                    </div>
                                    <h4 class="font-medium mb-1">DeepSeek</h4>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">深度求索中文大模型</p>
                                    <div class="mt-auto pt-2 border-t border-gray-100 dark:border-gray-800">
                                        <a href="https://platform.deepseek.com/" target="_blank" class="text-xs text-apple-blue dark:text-apple-darkblue hover:underline">
                                            获取API密钥 <i class="fas fa-external-link-alt ml-1"></i>
                                        </a>
                                    </div>
                                </label>
                            </div>

                            <div class="api-provider-card">
                                <label class="relative p-4 border border-gray-200 dark:border-gray-700 rounded-xl cursor-pointer hover:border-apple-blue dark:hover:border-apple-darkblue transition-all hover:shadow-md flex flex-col h-full">
                                    <input type="radio" name="apiProvider" value="baidu" class="hidden">
                                    <div class="absolute top-3 right-3 w-4 h-4 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center provider-radio">
                                        <div class="w-2 h-2 rounded-full bg-apple-blue dark:bg-apple-darkblue hidden provider-radio-dot"></div>
                                    </div>
                                    <h4 class="font-medium mb-1">文心一言</h4>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">百度大模型</p>
                                    <div class="mt-auto pt-2 border-t border-gray-100 dark:border-gray-800">
                                        <a href="https://cloud.baidu.com/doc/WENXINWORKSHOP/s/Dlyfpqnlh" target="_blank" class="text-xs text-apple-blue dark:text-apple-darkblue hover:underline">
                                            获取API密钥 <i class="fas fa-external-link-alt ml-1"></i>
                                        </a>
                                    </div>
                                </label>
                            </div>

                            <div class="api-provider-card">
                                <label class="relative p-4 border border-gray-200 dark:border-gray-700 rounded-xl cursor-pointer hover:border-apple-blue dark:hover:border-apple-darkblue transition-all hover:shadow-md flex flex-col h-full">
                                    <input type="radio" name="apiProvider" value="moonshot" class="hidden">
                                    <div class="absolute top-3 right-3 w-4 h-4 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center provider-radio">
                                        <div class="w-2 h-2 rounded-full bg-apple-blue dark:bg-apple-darkblue hidden provider-radio-dot"></div>
                                    </div>
                                    <h4 class="font-medium mb-1">月之暗面</h4>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">Moonshot系列模型</p>
                                    <div class="mt-auto pt-2 border-t border-gray-100 dark:border-gray-800">
                                        <a href="https://platform.moonshot.cn/console/api-keys" target="_blank" class="text-xs text-apple-blue dark:text-apple-darkblue hover:underline">
                                            获取API密钥 <i class="fas fa-external-link-alt ml-1"></i>
                                        </a>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 各个提供商的设置区域 -->
                    <!-- OpenAI API设置 -->
                    <div id="openai-settings" class="api-settings mb-6">
                        <h3 class="font-medium text-gray-700 dark:text-gray-300 mb-3">OpenAI设置</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">API密钥</label>
                                <input type="password" id="openai-api-key" placeholder="sk-..." 
                                    class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition">
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">文章模型</label>
                                    <select id="openai-text-model" class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition">
                                        <option value="gpt-4o">GPT-4o (推荐)</option>
                                        <option value="gpt-4-turbo">GPT-4 Turbo</option>
                                        <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">图像模型</label>
                                    <select id="openai-image-model" class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition">
                                        <option value="dall-e-3">DALL·E 3</option>
                                        <option value="dall-e-2">DALL·E 2</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Temperature</label>
                                    <input type="number" id="openai-temperature" min="0" max="2" step="0.1" value="0.7" 
                                        class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition">
                                </div>
                                
                                <div>
                                    <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Max Tokens</label>
                                    <input type="number" id="openai-max-tokens" min="100" max="16000" step="100" value="4000" 
                                        class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition">
                                </div>
                                
                                <div>
                                    <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">API代理 (可选)</label>
                                    <input type="text" id="openai-api-proxy" placeholder="https://your-proxy-url.com" 
                                        class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Anthropic API设置 -->
                    <div id="anthropic-settings" class="api-settings mb-6 hidden">
                        <!-- Anthropic设置内容 -->
                    </div>
                    
                    <!-- Poe API设置 -->
                    <div id="poe-settings" class="api-settings mb-6 hidden">
                        <h3 class="font-medium text-gray-700 dark:text-gray-300 mb-3">Poe API设置</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">API密钥</label>
                                <input type="password" id="poe-api-key" placeholder="您的Poe API密钥..." 
                                    class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition">
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">文章模型</label>
                                    <select id="poe-text-model" class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition">
                                        <option value="Claude-3.7-Sonnet">Claude-3.7-Sonnet (推荐)</option>
                                        <option value="Claude-3-Opus">Claude-3-Opus</option>
                                        <option value="GPT-4o">GPT-4o</option>
                                        <option value="Claude-3-Haiku">Claude-3-Haiku</option>
                                        <option value="GPT-3.5-Turbo">GPT-3.5-Turbo</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">图像模型</label>
                                    <select id="poe-image-model" class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition">
                                        <option value="FLUX-pro-1.1">FLUX-pro-1.1 (推荐)</option>
                                        <option value="DALLE-3">DALL·E 3</option>
                                        <option value="Midjourney">Midjourney</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="p-3 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-xl">
                                <div class="flex">
                                    <i class="fas fa-info-circle mt-1 mr-2"></i>
                                    <div>
                                        <p class="text-sm mb-2">获取Poe API Token的步骤：</p>
                                        <ol class="text-sm list-decimal ml-4 space-y-1">
                                            <li>登录 <a href="https://poe.com" target="_blank" class="underline">poe.com</a></li>
                                            <li>访问 <a href="https://poe.com/api_key" target="_blank" class="underline">https://poe.com/api_key</a></li>
                                            <li>复制生成的API密钥</li>
                                            <li>粘贴到上方的输入框中</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DeepSeek API设置 -->
                    <div id="deepseek-settings" class="api-settings mb-6 hidden">
                        <!-- DeepSeek设置内容 -->
                    </div>

                    <!-- 其他API设置... -->
                    
                    <!-- 自部署说明 -->
                    <div class="bg-gray-50 dark:bg-gray-800 rounded-xl p-4 mb-6">
                        <h3 class="font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center">
                            <i class="fas fa-server mr-2 text-apple-blue dark:text-apple-darkblue"></i>
                            网站部署说明
                        </h3>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">本应用可以轻松部署到您自己的网站上：</p>
                        <ol class="text-sm text-gray-600 dark:text-gray-400 space-y-2 pl-5 list-decimal">
                            <li>将所有文件上传到您的GitHub仓库</li>
                            <li>启用GitHub Pages服务</li>
                            <li>或者上传到您的服务器/静态网站托管平台</li>
                            <li>访问您的网站并配置API密钥</li>
                        </ol>
                    </div>
                    
                    <div class="flex justify-center">
                        <button id="saveApiSettingsBtn" class="py-2 px-6 bg-apple-blue hover:bg-blue-600 dark:bg-apple-darkblue dark:hover:bg-blue-700 text-white rounded-full font-medium transition-colors shadow-md hover:shadow-lg">
                            保存API配置
                        </button>
                    </div>

                    <!-- API测试状态 -->
                    <div id="apiTestResult" class="mt-4 hidden"></div>
                </section>
            </div>

            <!-- 预览排版面板 -->
            <div id="preview-tab" class="tab-content hidden">
                <!-- 生成状态 -->
                <div id="generationStatus" class="py-4 px-6 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-xl text-center mb-6 hidden">
                    <div class="flex items-center justify-center space-x-3">
                        <div class="apple-spinner"></div>
                        <span id="statusText">正在创作精彩内容...</span>
                    </div>
                </div>

                <!-- 排版主题展示 -->
                <div id="themeShowcase" class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <!-- 主题卡片 -->
                </div>

                <!-- 输出预览 -->
                <section id="outputSection" class="bg-white dark:bg-gray-900 rounded-2xl shadow-apple dark:shadow-apple-dark p-6 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-semibold flex items-center">
                            <i class="fas fa-newspaper mr-2 text-apple-blue dark:text-apple-darkblue"></i>
                            文章预览
                        </h2>
                        <div class="flex gap-2">
                            <button id="editArticleBtn" class="py-1.5 px-3 text-sm bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg transition-colors flex items-center">
                                <i class="fas fa-edit mr-1.5"></i>编辑
                            </button>
                            <button id="regenerateBtn" class="py-1.5 px-3 text-sm bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg transition-colors flex items-center">
                                <i class="fas fa-sync-alt mr-1.5"></i>重新生成
                            </button>
                            <button id="copyBtn" class="py-1.5 px-3 text-sm bg-apple-blue hover:bg-blue-600 dark:bg-apple-darkblue dark:hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center">
                                <i class="fas fa-copy mr-1.5"></i>复制文章
                            </button>
                        </div>
                    </div>
                    
                    <div id="articleOutput" class="theme-modern prose dark:prose-invert max-w-none border border-gray-100 dark:border-gray-800 p-6 rounded-xl bg-white dark:bg-gray-950 overflow-auto"></div>
                    
                    <!-- 生成的图片区域 -->
                    <div id="generatedImages" class="mt-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 hidden">
                        <h3 class="text-lg font-semibold col-span-full mb-2 flex items-center">
                            <i class="fas fa-images mr-2 text-apple-blue dark:text-apple-darkblue"></i>生成的图片
                        </h3>
                        <!-- 生成的图片将在这里显示 -->
                    </div>
                </section>
                
                <!-- 编辑文章对话框 -->
                <div id="editArticleModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden backdrop-blur-sm">
                    <div class="bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-auto shadow-xl animate-fade-in">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold">编辑文章内容</h3>
                            <button id="closeEditBtn" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">
                                <i class="fas fa-times text-lg"></i>
                            </button>
                        </div>
                        <div class="mb-4">
                            <div class="flex justify-between items-center mb-2">
                                <label class="font-medium text-gray-700 dark:text-gray-300">Markdown 编辑</label>
                                <div class="flex gap-2">
                                    <button id="formatBoldBtn" class="p-1.5 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded">
                                        <i class="fas fa-bold"></i>
                                    </button>
                                    <button id="formatItalicBtn" class="p-1.5 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded">
                                        <i class="fas fa-italic"></i>
                                    </button>
                                    <button id="formatLinkBtn" class="p-1.5 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded">
                                        <i class="fas fa-link"></i>
                                    </button>
                                    <button id="formatH2Btn" class="p-1.5 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded">
                                        <i class="fas fa-heading"></i>
                                    </button>
                                    <button id="formatQuoteBtn" class="p-1.5 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded">
                                        <i class="fas fa-quote-right"></i>
                                    </button>
                                </div>
                            </div>
                            <textarea id="articleEditArea" rows="20" class="w-full p-3 border border-gray-200 dark:border-gray-700 rounded-xl bg-apple-lightgray dark:bg-gray-800 text-base focus:ring-2 focus:ring-apple-blue dark:focus:ring-apple-darkblue focus:border-transparent outline-none transition font-mono"></textarea>
                        </div>
                        <div class="flex justify-end gap-3">
                            <button id="cancelEditBtn" class="py-2 px-4 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg transition-colors">
                                取消
                            </button>
                            <button id="saveEditBtn" class="py-2 px-4 bg-apple-blue hover:bg-blue-600 dark:bg-apple-darkblue dark:hover:bg-blue-700 text-white rounded-lg transition-colors">
                                保存更改
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="mt-12 text-center text-apple-midgray dark:text-gray-500 text-sm py-4">
            <p>© 2024 AI文章创作室 - 使用先进AI技术创建专业内容</p>
        </footer>
    </div>

    <!-- 脚本引用 -->
    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/article.js"></script>
    <script src="js/image.js"></script>
    <script src="js/scraper.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
